#!/bin/sh

# https://github.com/AlphaKeks

pgrep -x sxhkd > /dev/null || sxhkd &

bspc monitor DisplayPort-2 -d I II III IV V VI VII VIII IX X            # middle
bspc monitor DisplayPort-3 -d discord signal mail IV V VI VII VIII IX X # left
bspc monitor DisplayPort-4 -d I II III IV V VI VII VIII IX X            # top
bspc monitor HDMI-A-2 -d I II III IV V VI VII VIII IX X                 # right

bspc config border_width 0
bspc config window_gap 0
bspc config split_ratio 0.5
bspc config borderless_monocle false
bspc config focus_follows_pointer false
bspc config normal_border_color \#1e1e2e
bspc config active_border_color \#1e1e2e
bspc config focused_border_color \#7480c2

bspc rule -a Galculator state=floating
bspc rule -a Bitwarden state=floating
bspc rule -a Pavucontrol state=floating
bspc rule -a KeyOverlay state=floating
bspc rule -a Thunar state=floating
bspc rule -a Gthumb state=floating

bspc rule -a discord desktop=discord
bspc rule -a Signal desktop=signal
bspc rule -a Geary desktop=mail

# corners for floating windows
corners() {
	bspc subscribe node_state | while read -r _ _ _ node state status; do
		if [[ "$state" == "floating" ]]; then
			case "$status" in
				off) xprop -id "$node" -remove _PICOM_CORNERS;;
				on) xprop -id "$node" -f _PICOM_CORNERS 32c -set _PICOM_CORNERS 1;;
			esac
		fi
	done
}
corners &

/usr/bin/xsetroot -cursor_name left_ptr &
/usr/bin/nitrogen --restore &
/usr/bin/picom -b --config $HOME/.config/picom/picom.conf &
/usr/bin/dunst &

$HOME/.config/polybar/launch.sh &
/usr/bin/signal-desktop &
/usr/bin/discord &
/usr/bin/geary &
/usr/bin/steam -silent &

rm -rf $HOME/tmp/*
